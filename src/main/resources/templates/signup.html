<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>회원가입</title>
    <link rel="stylesheet" href="/static/css/signup.css" />
    <link rel="stylesheet" href="/static/css/m-signup.css" />
    <script
      src="https://code.jquery.com/jquery-3.6.1.min.js"
      integrity="sha256-o88AwQnZB+VDvE9tvIXrMQaPlFFSUTR+nldQm1LuPXQ="
      crossorigin="anonymous"
    ></script>
  </head>
  <body>
    <div class="wrap">
      <div class="logo">
        <img src="" alt="" />
      </div>
      <h1>회원가입</h1>
      <form action="/member/signUp" method="post">
        <p id="titleName" class="titleName">이름</p>
          <input type="text" name="memberName" id="name" class="inputName" />
        <p id="titleEmail" class="titleEmail">이메일</p>
          <input type="text" name="memberId" id="email" class="inputEmail" />
        <p id="titlePw" class="titlePw">비밀번호</p>
        <p id="comment" class="comment">
          비밀번호는 8~20자 영문,숫자,특수문자로 입력하세요
        </p>
          <input type="text" name="memberPw" id="inputPw" class="inputPw" />
        <p class="commentHidden">
          영문,숫자,특수문자를 조합한 8자 이상이여야 합니다!
        </p>
        <p id="titleTest" class="titleTest">비밀번호 확인</p>
          <input type="text" name="testPw" id="testPw" class="testPw" />
        <p class="commentHidden">비밀번호가 일치 하지 않습니다!</p>
        <p class="titlePhone" >휴대전화</p>
        <p class="comment">
          휴대폰 번호는 '-'를 제외하고 입력해주세요.
        </p>
          <input type="text" name="memberPhone" id="inputPhone" class="inputPhone" />
        <!-- 휴대폰 인증 -->
          <button type="button" id="sendSms">인증문자발송</button>

          <input type="test" id="phoneCheckVal" placeholder="인증번호를 입력하세요.">
        <!-- 타이머 생성 -->
          <label for="Timer" id="timerLabel">남은 시간:</label>
          <input id="Timer" type="text" value="" readonly/>
          <button type="button" id="phoneConfirm">인증번호 확인</button>
          <button id="signupBtn" class="signupBtn">회원가입</button>
        <p class="goLogin">
          이미 가입 하셨나요? <a href="/"><strong>로그인</strong></a>
        </p>
      </form>
    </div>
    <script>
      let hide = document.getElementsByClassName("commentHidden");

      // $(hide).css("display", "block"); 경고 메세지

      // 문자 인증
      let sendSms = $("#sendSms");
      let inputPhone = $("#inputPhone");

      sendSms.on("click",function(){
        sendSms.attr("disabled",false); // 문자 발송 버튼 비활성화(3분간)
        inputPhone.attr("readonly",true);
      });

      // 타이머
      const Timer = document.getElementById('Timer'); //스코어 기록창-분
      let time= 180000;
      let min=3;
      let sec=60;

      sendSms.on("click",function() {

        alert("인증번호가 발송되었습니다.");

        sendSms.attr("disabled", true); // 발송 버튼 비활성화

        Timer.value = min + ":" + '00';

        function TIMER() {
          PlAYTIME = setInterval(function () {
            time = time - 1000; //1초씩 줄어듦
            min = time / (60 * 1000); //초를 분으로 나눠준다.

            if (sec > 0) { //sec=60 에서 1씩 빼서 출력해준다.
              sec = sec - 1;
              Timer.value = Math.floor(min) + ':' + sec; //실수로 계산되기 때문에 소숫점 아래를 버리고 출력해준다.

            }
            if (sec === 0) {
              // 0에서 -1을 하면 -59가 출력된다.
              // 그래서 0이 되면 바로 sec을 60으로 돌려주고 value에는 0을 출력하도록 해준다.
              sec = 60;
              Timer.value = Math.floor(min) + ':' + '00'
            }

          }, 1000); //1초마다
        }
        TIMER();
        setTimeout(function(){
          clearInterval(PlAYTIME);
          sendSms.attr("disabled",false); // 3분이 지나면 버튼 활성화
        },180000);//3분이 되면 타이머를 삭제한다.
      });





    </script>
  </body>
</html>
